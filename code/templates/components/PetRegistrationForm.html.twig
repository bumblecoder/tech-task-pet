<div {{ attributes }} class="bg-white p-6 rounded-lg shadow max-w-md w-full space-y-4 mx-auto px-4">
    {{ form_start(form, {
        attr: {
            'data-action': 'live#action:prevent',
            'data-live-action-param': 'save',
            'novalidate': 'novalidate'
         }}) }}
    <div class="flex justify-between items-end w-full mb-6 px-4">
        <i class="fas fa-paw text-green-500 text-xl rotate-90 translate-y-0"></i>
        <i class="fas fa-paw text-green-500 text-xl rotate-90 translate-y-2"></i>
        <i class="fas fa-paw text-gray-400 text-xl rotate-90 translate-y-0"></i>
        <i class="fas fa-paw text-gray-400 text-xl rotate-90 translate-y-2"></i>
        <i class="fas fa-paw text-gray-400 text-xl rotate-90 translate-y-0"></i>
        <i class="fas fa-paw text-gray-400 text-xl rotate-90 translate-y-2"></i>
        <i class="fas fa-paw text-gray-400 text-xl rotate-90 translate-y-0"></i>
    </div>
    <h1 class="text-2xl font-medium text-blue-900 mb-6 text-left">
        Tell us about your pet
    </h1>
    <div>
        {{ form_label(form.name, 'Pet’s name', {
            label_attr: {'class': 'block mb-1 font-semibold text-sm text-gray-700'}
        }) }}
        {{ form_widget(form.name, {
            attr: {
                class: 'w-full border border-gray-300 rounded px-3 py-2 hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-[color:#1D9BD0] focus:border-[color:#1D9BD0]',
                placeholder: 'Enter your pet\'s name'
            }
        }) }}
        {{ form_errors(form.name) }}
    </div>
    <br>
    <fieldset>
        <legend class="font-semibold text-gray-700 mb-2 text-sm">Pet type</legend>

        <div class="flex max-w-xs">
            {% for child in form.type %}
                {% set rounded = loop.first ? 'rounded-l' : (loop.last ? 'rounded-r' : '') %}

                <div class="relative">
                    {# ВАЖНО: без data-model на инпуте! Рендерим штатный radio от Symfony #}
                    {{ form_widget(child, { attr: { class: 'sr-only peer' } }) }}

                    {# По клику дергаем Live-экшен и передаём id (value радио) #}
                    <label
                            for="{{ child.vars.id }}"
                            data-action="click->live#action"
                            data-live-action-param="pickType"
                            data-live-id-param="{{ child.vars.value }}"
                            class="cursor-pointer px-4 py-2 {{ rounded }}
                 border border-[color:#1D9BD0] hover:border-[color:#1983b8]
                 {{ not loop.first ? 'border-l-0' : '' }}
                 peer-checked:bg-[color:#1D9BD0]
                 peer-checked:text-white
                 peer-checked:border-[color:#1D9BD0]
                 transition block"
                    >
                        {{ child.vars.label }}
                    </label>
                </div>
            {% endfor %}
        </div>

        {% if form_errors(form.type) %}
            <p class="text-red-600 text-sm mt-1">{{ form_errors(form.type) }}</p>
        {% endif %}
    </fieldset>







    <br>

    <div class="relative">
        <label for="breed-search" class="block mb-1 font-semibold text-sm text-gray-700">
            What breed are they?
        </label>

        <input
                id="breed-search"
                type="search"
                class="w-full border border-gray-300 rounded px-3 py-2"
                placeholder="Can't find it?"
                data-model="debounce(300)|breedSearch"
                data-action="input->live#action"
                data-live-action-param="searchBreeds"
                autocomplete="off"
                value="{{ this.breedSearch ?? '' }}"
        />

        <input type="hidden"
               name="{{ form.breed.vars.full_name }}"
               value="{{ this.breedId ?? '' }}">

        {% if filteredBreeds is defined and filteredBreeds is not empty %}
            <div class="absolute z-10 bg-white border border-gray-300 w-full mt-1 rounded shadow max-h-64 overflow-auto">
                {% for b in filteredBreeds %}
                    <button
                            type="button"
                            class="w-full text-left px-4 py-2 hover:bg-gray-100"
                            data-action="click->live#action"
                            data-live-action-param="setBreed"
                            data-live-id-param="{{ b.id }}"
                    >
                        {{ b.name }}
                    </button>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    <fieldset class="mt-4">
        <legend class="font-semibold text-gray-700 mb-2 text-sm">
            Do you know their date of birth?
        </legend>

        <div class="flex max-w-xs">
            <div>
                <input
                        type="radio"
                        id="dob-no"
                        name="dob-known"
                        value="0"
                        class="hidden peer/dob-no"
                        data-model="dobKnown"
                        data-model-event="change"
                        {% if this.dobKnown == false %}checked{% endif %}
                />
                <label
                        for="dob-no"
                        class="cursor-pointer px-4 py-2 rounded-l border border-[color:#1D9BD0]
           hover:border-[color:#1983b8]
           peer-checked/dob-no:bg-[color:#1D9BD0] peer-checked/dob-no:text-white
           peer-checked/dob-no:border-[color:#1D9BD0] transition block"
                >
                    No
                </label>
            </div>

            <div>
                <input
                        type="radio"
                        id="dob-yes"
                        name="dob-known"
                        value="1"
                        class="hidden peer/dob-yes"
                        data-model="dobKnown"
                        data-model-event="change"
                        {% if this.dobKnown is same as(true) %}checked{% endif %}
                />
                <label
                        for="dob-yes"
                        class="cursor-pointer px-4 py-2 rounded-r border border-[color:#1D9BD0] border-l-0
                       hover:border-[color:#1983b8]
                       peer-checked/dob-yes:bg-[color:#1D9BD0] peer-checked/dob-yes:text-white
                       peer-checked/dob-yes:border-[color:#1D9BD0] transition block"
                >
                    Yes
                </label>
            </div>
        </div>

        {% if this.dobKnown is same as(false) or this.dobKnown is empty %}
            <div class="{{ this.dobKnown ? 'hidden' : 'mt-3' }}">
                <label class="block mb-1 font-semibold text-gray-700 text-sm">Approximate Age</label>
                {{ form_widget(form.approximateAge, {
                    attr: {
                        class: 'w-full max-w-xs border border-gray-300 bg-white rounded px-3 py-2 hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-[color:#1D9BD0] focus:border-[color:#1D9BD0]'
                    }
                }) }}
                {{ form_errors(form.approximateAge) }}
            </div>
        {% endif %}

        {{ form_widget(form.dateOfBirth, {
            type: 'hidden',
            attr: {
                'data-model': 'form.dateOfBirth'
            }
        }) }}

        {% if this.dobKnown is same as(true) %}
            <div class="mt-3">
                <label class="block font-semibold text-gray-700 text-sm mb-2">Birthdate</label>
                <div class="flex gap-2">
                    <div class="flex flex-col">
                        <label class="text-gray-600 text-xs mb-1" for="dob-day">Day</label>
                        <input
                                id="dob-day" type="number" inputmode="numeric" min="1" max="31" placeholder="DD"
                                class="w-20 border border-gray-300 rounded px-2 py-1
                           hover:border-gray-400 focus:outline-none focus:ring-1
                           focus:ring-[color:#1D9BD0] focus:border-[color:#1D9BD0]"
                                data-model="dobDay" required
                        />
                    </div>
                    <div class="flex flex-col">
                        <label class="text-gray-600 text-xs mb-1" for="dob-month">Month</label>
                        <input
                                id="dob-month" type="number" inputmode="numeric" min="1" max="12" placeholder="MM"
                                class="w-20 border border-gray-300 rounded px-2 py-1
                           hover:border-gray-400 focus:outline-none focus:ring-1
                           focus:ring-[color:#1D9BD0] focus:border-[color:#1D9BD0]"
                                data-model="dobMonth" required
                        />
                    </div>
                    <div class="flex flex-col">
                        <label class="text-gray-600 text-xs mb-1" for="dob-year">Year</label>
                        <input
                                id="dob-year" type="number" inputmode="numeric" min="1900" max="{{ 'now'|date('Y') }}" placeholder="YYYY"
                                class="w-28 border border-gray-300 rounded px-2 py-1
                           hover:border-gray-400 focus:outline-none focus:ring-1
                           focus:ring-[color:#1D9BD0] focus:border-[color:#1D9BD0]"
                                data-model="dobYear" required
                        />
                    </div>
                </div>
            </div>
        {% endif %}

    </fieldset>



    <button
            type="submit"
            class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition">
        Save Pet
    </button>
</div>
